{"is_source_file": true, "format": "Python", "description": "Main FastAPI application setup with middleware, error handling, and a health check endpoint.", "external_files": ["fastapi", "starlette.middleware.base", "starlette.middleware.gzip", "starlette.middleware.trustedhost", "starlette.responses", "logging", "time", "json"], "external_methods": ["fastapi.FastAPI", "fastapi.Request", "fastapi.Response", "fastapi.middleware.Middleware", "fastapi.exceptions.RequestValidationError", "starlette.middleware.base.BaseHTTPMiddleware", "starlette.middleware.gzip.GZipMiddleware", "starlette.middleware.trustedhost.TrustedHostMiddleware", "starlette.responses.JSONResponse", "starlette.responses.PlainTextResponse", "starlette.types.ASGIApp"], "published": ["app"], "classes": [{"name": "SecurityHeadersMiddleware", "description": "Middleware that adds security headers similar to helmet in Node.js."}, {"name": "RequestLoggingMiddleware", "description": "Middleware that logs incoming requests and their duration."}, {"name": "JSONSizeLimitMiddleware", "description": "Middleware that limits JSON payload size."}], "methods": [{"name": "FastAPI create_app()", "description": "Creates and configures the FastAPI app with middleware, error handlers, and a health endpoint.", "scope": "", "scopeKind": ""}, {"name": "__init__(self, app: ASGIApp, max_bytes: int = 1 * 1024 * 1024)", "scope": "JSONSizeLimitMiddleware", "scopeKind": "class", "description": "unavailable"}, {"name": "dispatch(self, request: Request, call_next)", "scope": "SecurityHeadersMiddleware", "scopeKind": "class", "description": "unavailable"}, {"name": "health_check()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "json_error_response(status_code: int, message: str, code: str = \"ERROR\", details: dict | None = None)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "receive_with_body()", "scope": "JSONSizeLimitMiddleware.dispatch", "scopeKind": "member", "description": "unavailable"}, {"name": "unhandled_exception_handler(request: Request, exc: Exception)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "validation_exception_handler(request: Request, exc: RequestValidationError)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}], "calls": ["logging.basicConfig", "logger = logging.getLogger", "app = FastAPI", "app.exception_handler", "app.get"], "search-terms": ["FastAPI", "middleware", "security headers", "request logging", "size limit middleware", "health check", "create_app"], "state": 2, "file_id": 2, "knowledge_revision": 10, "git_revision": "23403992c432efb2086e9d3ab738bcf77bde7755", "revision_history": [{"9": "23403992c432efb2086e9d3ab738bcf77bde7755"}, {"10": "23403992c432efb2086e9d3ab738bcf77bde7755"}], "ctags": [{"_type": "tag", "name": "JSONSizeLimitMiddleware", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^class JSONSizeLimitMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RequestLoggingMiddleware", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^class RequestLoggingMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SecurityHeadersMiddleware", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^class SecurityHeadersMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    def __init__(self, app: ASGIApp, max_bytes: int = 1 * 1024 * 1024):$/", "language": "Python", "kind": "member", "signature": "(self, app: ASGIApp, max_bytes: int = 1 * 1024 * 1024)", "scope": "JSONSizeLimitMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^app = create_app()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_app", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^def create_app() -> FastAPI:$/", "language": "Python", "typeref": "typename:FastAPI", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "JSONSizeLimitMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "RequestLoggingMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "SecurityHeadersMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    def health_check():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "json_error_response", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^def json_error_response(status_code: int, message: str, code: str = \"ERROR\", details: dict | Non/", "language": "Python", "kind": "function", "signature": "(status_code: int, message: str, code: str = \"ERROR\", details: dict | None = None)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^logger = logging.getLogger(\"middleware\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "receive_with_body", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^                async def receive_with_body():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "JSONSizeLimitMiddleware.dispatch", "scopeKind": "member"}, {"_type": "tag", "name": "unhandled_exception_handler", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def unhandled_exception_handler(request: Request, exc: Exception):$/", "file": true, "language": "Python", "kind": "function", "signature": "(request: Request, exc: Exception)", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "validation_exception_handler", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def validation_exception_handler(request: Request, exc: RequestValidationError):$/", "file": true, "language": "Python", "kind": "function", "signature": "(request: Request, exc: RequestValidationError)", "scope": "create_app", "scopeKind": "function"}], "hash": "364a65426456bbc4eed9a028be2da54b", "format-version": 4, "code-base-name": "nodejs_crud_api", "filename": "nodejs_crud_api/src/api/main.py", "fields": [{"name": "app = create_app()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(\"middleware\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}