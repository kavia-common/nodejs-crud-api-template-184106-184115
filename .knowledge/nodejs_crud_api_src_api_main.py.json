{"is_source_file": true, "format": "Python", "description": "This file initializes a FastAPI web application with various middleware components including security headers, request logging, payload size limiting, CORS, gzip compression, and centralized error handling. It defines middleware classes, exception handlers, and a health check endpoint, serving as the main entry point for the web API server.", "external_files": ["fastapi", "starlette.middleware.base", "starlette.middleware.gzip", "starlette.responses", "starlette.types", "logging", "time"], "external_methods": ["fastapi.FastAPI", "fastapi.middleware.Middleware", "starlette.middleware.base.BaseHTTPMiddleware", "starlette.responses.JSONResponse", "starlette.types.ASGIApp", "logging.basicConfig", "logging.getLogger", "RequestValidationError.errors"], "published": ["app", "create_app"], "classes": [{"name": "SecurityHeadersMiddleware", "description": "Adds common security headers to responses to enhance security, similar to helmet in Node.js."}, {"name": "RequestLoggingMiddleware", "description": "Logs incoming HTTP request details including method, path, client IP, duration, and status code."}, {"name": "JSONSizeLimitMiddleware", "description": "Limits the size of incoming JSON payloads to prevent excessively large requests."}], "methods": [{"name": "FastAPI create_app()", "description": "Creates and configures a FastAPI application instance with middleware, exception handlers, and a health check endpoint.", "scope": "", "scopeKind": ""}, {"name": "json_error_response(status_code: int, message: str, code: str = \"ERROR\", details: dict | None = None)", "description": "Constructs and returns a standardized JSON error response with specified status, message, code, and optional details.", "scope": "", "scopeKind": ""}, {"name": "__init__(self, app: ASGIApp, max_bytes: int = 1 * 1024 * 1024)", "scope": "JSONSizeLimitMiddleware", "scopeKind": "class", "description": "unavailable"}, {"name": "dispatch(self, request: Request, call_next)", "scope": "SecurityHeadersMiddleware", "scopeKind": "class", "description": "unavailable"}, {"name": "health_check()", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "receive_with_body()", "scope": "JSONSizeLimitMiddleware.dispatch", "scopeKind": "member", "description": "unavailable"}, {"name": "unhandled_exception_handler(request: Request, exc: Exception)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}, {"name": "validation_exception_handler(request: Request, exc: RequestValidationError)", "scope": "create_app", "scopeKind": "function", "description": "unavailable"}], "calls": ["fastapi.FastAPI", "logging.basicConfig", "logging.getLogger", "app.exception_handler", "json_error_response", "health_check"], "search-terms": ["FastAPI middleware setup", "security headers middleware", "request logging in FastAPI", "JSON payload size limit", "centralized error handling", "health check endpoint", "ASGI application creation"], "state": 2, "file_id": 2, "knowledge_revision": 12, "git_revision": "8c4c502d01fc7b2db6fb2a506bbbed5c8ab32683", "revision_history": [{"9": "23403992c432efb2086e9d3ab738bcf77bde7755"}, {"10": "23403992c432efb2086e9d3ab738bcf77bde7755"}, {"11": "8c4c502d01fc7b2db6fb2a506bbbed5c8ab32683"}, {"12": "8c4c502d01fc7b2db6fb2a506bbbed5c8ab32683"}], "ctags": [{"_type": "tag", "name": "JSONSizeLimitMiddleware", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^class JSONSizeLimitMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "RequestLoggingMiddleware", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^class RequestLoggingMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "SecurityHeadersMiddleware", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^class SecurityHeadersMiddleware(BaseHTTPMiddleware):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    def __init__(self, app: ASGIApp, max_bytes: int = 1 * 1024 * 1024):$/", "language": "Python", "kind": "member", "signature": "(self, app: ASGIApp, max_bytes: int = 1 * 1024 * 1024)", "scope": "JSONSizeLimitMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^app = create_app()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "create_app", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^def create_app() -> FastAPI:$/", "language": "Python", "typeref": "typename:FastAPI", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "JSONSizeLimitMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "RequestLoggingMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "dispatch", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def dispatch(self, request: Request, call_next):$/", "language": "Python", "kind": "member", "signature": "(self, request: Request, call_next)", "scope": "SecurityHeadersMiddleware", "scopeKind": "class"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    def health_check():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "json_error_response", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^def json_error_response(status_code: int, message: str, code: str = \"ERROR\", details: dict | Non/", "language": "Python", "kind": "function", "signature": "(status_code: int, message: str, code: str = \"ERROR\", details: dict | None = None)"}, {"_type": "tag", "name": "logger", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^logger = logging.getLogger(\"middleware\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "receive_with_body", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^                async def receive_with_body():$/", "file": true, "language": "Python", "kind": "function", "signature": "()", "scope": "JSONSizeLimitMiddleware.dispatch", "scopeKind": "member"}, {"_type": "tag", "name": "unhandled_exception_handler", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def unhandled_exception_handler(request: Request, exc: Exception):$/", "file": true, "language": "Python", "kind": "function", "signature": "(request: Request, exc: Exception)", "scope": "create_app", "scopeKind": "function"}, {"_type": "tag", "name": "validation_exception_handler", "path": "/home/kavia/workspace/code-generation/nodejs-crud-api-template-184106-184115/nodejs_crud_api/src/api/main.py", "pattern": "/^    async def validation_exception_handler(request: Request, exc: RequestValidationError):$/", "file": true, "language": "Python", "kind": "function", "signature": "(request: Request, exc: RequestValidationError)", "scope": "create_app", "scopeKind": "function"}], "hash": "8141aa110d98e497613a14144bf43cd5", "format-version": 4, "code-base-name": "nodejs_crud_api", "filename": "nodejs_crud_api/src/api/main.py", "fields": [{"name": "app = create_app()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "logger = logging.getLogger(\"middleware\")", "scope": "", "scopeKind": "", "description": "unavailable"}]}